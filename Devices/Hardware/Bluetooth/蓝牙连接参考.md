## 蓝牙连接:HC05与HC06互联

### 1. 接线

| 蓝牙 | USART | STM32 |
| :--: | :---: | :---: |
|  RX  |  TX   |  TX   |
|  TX  |  RX   |  RX   |
| GND  |  GND  |  GND  |
| VCC  |  5V   |  5V   |

**注:AT调试模式可能还要接EN到3V3**

### 2. HC05与HC06互联

**AT模式下串口为38400**

==**正式模式,串口记得配置成9600!!!**==

      1. 第一步：使HC-05进入AT模式        
                 方法一：HC-05的EN管脚置高电平，之后给板子上电。当HC-05的LED灯每两秒钟闪烁一次时，说明此时它进入了AT模式          
                 方法二：按住HC-05模块上面的按键，同时给模块上电，在松开按键，HC-05即可进入AT模式
           
        将串口调试助手波特率设置为38400，当HC-05进入AT模式后，可以通过串口调试助手进行测试，当你发送"AT"时,你会收到"OK",这表明HC-05已经进入AT模式         
        HC-06上电后即进入AT模式，将串口调试助手波特率设置为9600，当你发送"AT"时,你会收 到"OK",这表明HC-06已经进入AT模式
        
      2. 第二步：将HC-05和HC-06的密码、波特率设置为相同
              1.设置密码：发送"AT+PSWD=1234",即设置密码为"1234"      
              2.设置波特率：发送"AT+UART=9600,1,0",即设置波特率为9600，一个停止位，没有校验位
    
      3.第三步：配对与连接
             确保HC-05与HC-06有相同的波特率和密码，确保HC-05进入AT模式，然后在串口调试助手中给HC-05输入以下指令：
                 1. AT+RMAAD\r\n    //清楚所有已配对设备，你会收到"OK"的回复            
                 2. AT+ROLE=1\r\n    //设置HC-05为主机，你会收到"OK"的回复              
                 3. AT+CMODE=0\r\n  //允许HC-05连接任何设备，你会收到"OK"的回复       
                 4. AT+INQM=0,5,9\r\n  //设置查询模式：标准信号强度指示，超过5个蓝牙设备响应则终止查询，设定超时为9秒,你会收到"OK"的回复       
                 5. AT+INIT   //初始化spp配置文件（spp是啥，我也不知道）你会收到"OK"的回复     //这个 指令需要HC-05的EN管脚置高电平.如果没有，你不会收到任何回复（这个我没有试成功，但是边发送边按按钮有时会有回复）       
                 6. AT+INQ  //搜索其它蓝牙设备,如HC-06，你会收到类似如下回 复"+INQ:21:13:4D0FF,1F00,7FFF",返回了三个值，第一个是HC-06的地址，第二个是设备的种类，第三个是信号强度。这个指令只有在HC-05被设置为主机并在AT+INIT指令之后才会生效（如果收不到回复，可以试试边发送边按按钮）       
                 7. 获得HC06的地址(如21:13:4D0FF)后,向HC-05发送"AT+PAIR=21,13,4D0FF,9(这里的,9实测不需要)".   //这个指令中9代表HC05会在9秒钟和HC06配对，如果配对成功，你将会收到"OK"的回复      
                 8. 使用指令"AT+BIND=已知地址（21,13,4D0FF）",绑定蓝牙地址（绑定指令只有在指定蓝牙地址连接模式时有效），收到"OK"的回复，即表示设置成功 
                 9. 对HC-05 输入指令"AT+CMODE=1"  //设置HC-05仅与已配对设备进行连接，收到"OK"的 回复，即表示设置成功     
                 10.对HC-05输入指令"AT+LINK=已知地址(21.13,4D0FF)",与蓝牙设备建立连接，收到"OK"的回复，即表示连接成功   
       
    HC-05与HC-06配对成功后，你会看到HC-05的LED灯每秒很快地闪两下，HC-06的LED一直亮，不闪烁，这表明连接已经建立。以后每次上电之后，HC05和HC06都会自动连接。    

参考资料:

[连接HC-05与HC-06_afmotor电机扩展板与hc06结合-CSDN博客](https://blog.csdn.net/weixin_43182682/article/details/83476426)

## 蓝牙连接:HC05与HC05互联

[HC-05蓝牙模块详细配置、连接与使用过程_hc05-CSDN博客](https://blog.csdn.net/qq_51688022/article/details/134301535?ops_request_misc=%7B%22request%5Fid%22%3A%2286e9dc46cbe32fdab8e0ad2eff22c0bf%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=86e9dc46cbe32fdab8e0ad2eff22c0bf&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-134301535-null-null.142^v102^control&utm_term=HC05&spm=1018.2226.3001.4187)